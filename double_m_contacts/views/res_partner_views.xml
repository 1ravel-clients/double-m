<?xml version='1.0' encoding='utf-8'?>
<odoo>
<!-- VIEWS -->
<record id="view_partner_form_inherit" model="ir.ui.view">
    <field name="name">view_partner_form_inherit</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form"/>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='vat']" position="after">
           <field name="pic"/>
           <field name="pic_position"/>
           <field name="pic_phone"/>
           <field name="pic_email"/>
        </xpath>
        <xpath expr="//field[@name='category_id']" position="after">
           <field name="is_main_contact"/>
        </xpath>
        <xpath expr="//field[@name='child_ids']/form" position="replace">
           <form string="Contact / Address">
                <sheet>
                    <!-- parent_id and type fields needed in attrs in base_address_city module which overwrites
                    _fields_view_get() of partner. It would be better to put those fields there but the web client
                    dosen't support when a field is displayed several times in the same view.-->
                    <field name="type" required="1" widget="radio" options="{'horizontal': true}"/>
                    <field name="parent_id" invisible="1"/>
                    <hr/>
                    <group col="12">
                        <group colspan="5">
                            <field name="name" string="Contact Name" required="type == 'contact'"/>
                            <field name="function" placeholder="e.g. Sales Director" invisible="type != 'contact'"/>
                            <label for="street" string="Address" invisible="type == 'contact'"/>
                            <div invisible="type == 'contact'">
                                <div class="o_address_format" name="div_address">
                                    <field name="street" placeholder="Street..." class="o_address_street"/>
                                    <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                    <field name="city" placeholder="City" class="o_address_city"/>
                                    <field name="state_id" class="o_address_state" placeholder="State" options="{'no_open': True, 'no_quick_create': True}" context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}"/>
                                    <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                                    <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                </div>
                            </div>
                            <field name="comment" placeholder="Internal notes..."/>
                        </group>
                        <group colspan="5">
                            <field name="email" widget="email"/>
                            <field name="phone" widget="phone"/>
                            <!-- <field name="mobile" widget="phone"/> -->
                            <field name="company_id" invisible="1"/>
                        </group>
                        <group colspan="1">
                            <field name="image_1920" widget="image" class="oe_avatar" nolabel="1" options="{'image_preview': 'image_128'}"/>
                        </group>
                    </group>
                    <field name="lang" invisible="1"/>
                    <field name="user_id" invisible="1"/>
                    <field name="image_128" invisible="1"/>
                </sheet>
            </form>
        </xpath>
    </field>
</record>


<record id="view_res_partner_filter_inherit" model="ir.ui.view">
    <field name="name">view_res_partner_filter_inherit</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_res_partner_filter"/>
    <field name="arch" type="xml">
        <xpath expr="//filter[@name='inactive']" position="after">
            <separator/>
           <filter string="Main contact" name="filter_main_contact" domain="[('is_main_contact', '=', True)]"/>
        </xpath>
    </field>
</record>

<!-- ACTION -->
<record id="contacts.action_contacts" model="ir.actions.act_window">
    <field name="name">Contacts</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">res.partner</field>
    <field name="view_mode">kanban,list,form,activity</field>
    <field name="search_view_id" ref="double_m_contacts.view_res_partner_filter_inherit"/>
    <field name="context">{'default_is_company': True, 'search_default_filter_main_contact': True}</field>
    <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
        Create a contact in your address book
        </p><p>
        Odoo helps you to easily track all activities related to a customer.
        </p>
    </field>
</record>

</odoo>
